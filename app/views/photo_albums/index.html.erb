<div class="row my-5">
  <div class="col">
    <%= bootstrap_flash %>
    <h1 class="text-center">Photos</h1>

    <div class="d-flex justify-content-between text-right">
      <div class="dropdown">
        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <%= filtered_by(@users_with_albums, params) %>
        </a>

        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
          <%= link_to "All Albums", photo_albums_path, class: "dropdown-item" %>
          <%= link_to "My Albums", photo_albums_path(album: 'current_user'), class: "dropdown-item" %>
          <% @users_with_albums.each do |user_album| %>
            <%= link_to user_album[:name], photo_albums_path(user: user_album[:id]), class: "dropdown-item" %>
          <% end %>
        </div>
      </div>
      <%= link_to "Create new photo album", new_photo_album_path, class: "btn btn-primary mb-3" %>
    </div>

    <div class="row">
      <% @photo_albums.each do |photo_album| %>
        <div class="col-lg-3">
          <div class="card text-white bg-dark my-2" style="width: 18rem;">
            <% if photo_album.images.attached? %>
              <%= image_tag(photo_album.images.first, class: "card-img-top", style: "width: 100%; height: 40vh; object-fit: cover;") %>
            <% end %>
            <div class="card-body">
              <h5 class="card-title"><%= photo_album.name %></h5>
              <p class="card-text"><%= photo_album.description %></p>
              <p class="card-text text-info">Uploaded by: <%= photo_album.user.full_name %></p>
              <%= link_to "View Album", photo_album_path(photo_album), class: "card-link" %><br>
              <% if can? :update, photo_album %>
                <%= link_to "Edit Album", edit_photo_album_path(photo_album), class: "card-link" %>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
  </div>
</div>
